{
  "ProjectName": "spevo",
  "Title": "SharePoint.Evolution",
  "Description": "Migration for Microsoft SharePoint 2010 data - Content Types, List, Columns, ListItems and many other in \"Ruby on Rails-style\". (AcitveRecord::Migration)\r\n\r\nWrite small evolution's steps which help to deploy and synchronize data schema beetween production and development environment.\r\n\r\nSharePoint 2010, written in C#.\r\n",
  "MovedLink": "",
  "HomeWiki": "<div class=\"wikidoc\"><h1>Project Description</h1>\r\nMigration for Microsoft SharePoint 2010 data - Content Types, List, Columns, ListItems and many other in &#34;Ruby on Rails-style&#34;. &#40;AcitveRecord&#58;&#58;Migration&#41;<br /><br />Write small evolution&#39;s steps which help to deploy and synchronize data schema beetween production and development environment.<br /><br />SharePoint 2010, written in C&#35;.<br /><br />\n<h1>TODO</h1>\r\n<ul><li>Smart Helpers for SharePoint Provider</li>\n<li>MSBuild support </li>\n<li>PowerShell support</li></ul>\n\n<h1>Example</h1>\r\nYou may use it in SharePoint Feature Upgrading Mechanism. Here is an example for 2 small evolutions. Create SharePoint Console Applications with reference to FTC.SharePoint.Evolution.dll and Microsoft.SharePoint.dll. .NET version 3.5, 64bit. And run it under administrator account on server with any version of SharePoint 2010.<br />\n<ul><li><b>AddListWithNameEvolutionToWeb.cs</b>:</li></ul>\n<div style=\"color:Black;background-color:White;\"><pre>\r\n<span style=\"color:Blue;\">using</span>  FTC.SharePoint.Evolution.Core;\n\n    [SPEvolutionAttribute(1)]\n    <span style=\"color:Blue;\">public</span> <span style=\"color:Blue;\">class</span> AddListWithNameEvolutionToWeb : SPEvolution\n    {\n        <span style=\"color:Blue;\">const</span> <span style=\"color:Blue;\">string</span> LIST_NAME = <span style=\"color:#A31515;\">&quot;EvoList&quot;</span>;\n        <span style=\"color:Blue;\">public</span> <span style=\"color:Blue;\">override</span> <span style=\"color:Blue;\">void</span> Up()\n        {\n             <span style=\"color:Blue;\">this</span>.EvoContext.AddGenericList(LIST_NAME, <span style=\"color:#A31515;\">&quot;list description&quot;</span>);\n        }\n        <span style=\"color:Blue;\">public</span> <span style=\"color:Blue;\">override</span> <span style=\"color:Blue;\">void</span> Down()\n        {\n             <span style=\"color:Blue;\">this</span>.EvoContext.DeleteList(LIST_NAME)\n        }\n    }\r\n</pre></div><ul><li><b>AddFieldToList.cs</b>:</li></ul>\n<div style=\"color:Black;background-color:White;\"><pre>\r\n    [SPEvolutionAttribute(2)]\n    <span style=\"color:Blue;\">public</span> <span style=\"color:Blue;\">class</span> AddFieldToList : SPEvolution\n    {\n        <span style=\"color:Blue;\">const</span> <span style=\"color:Blue;\">string</span> LIST_NAME = <span style=\"color:#A31515;\">&quot;EvoList&quot;</span>;\n        <span style=\"color:Blue;\">public</span> <span style=\"color:Blue;\">override</span> <span style=\"color:Blue;\">void</span> Up()\n        {\n\n            <span style=\"color:Blue;\">if</span> (<span style=\"color:Blue;\">this</span>.EvoContext.Web.Lists.TryGetList( LIST_NAME) != <span style=\"color:Blue;\">null</span>)\n            {\n                <span style=\"color:Blue;\">this</span>.EvoContext.Web.Lists.TryGetList( LIST_NAME).Fields.Add(<span style=\"color:#A31515;\">&quot;newfield&quot;</span>, SPFieldType.Integer, <span style=\"color:Blue;\">false</span>);\n            }\n        }\n        <span style=\"color:Blue;\">public</span> <span style=\"color:Blue;\">override</span> <span style=\"color:Blue;\">void</span> Down()\n        {\n            SPList list = <span style=\"color:Blue;\">this</span>.EvoContext.Web.Lists.TryGetList(LIST_NAME);\n            <span style=\"color:Blue;\">if</span> (list != <span style=\"color:Blue;\">null</span>)\n            {\n                list.Fields.Delete(<span style=\"color:#A31515;\">&quot;newfield&quot;</span>);\n            }\n        }\n    }\r\n</pre></div>\n<ul><li><b>Program.cs</b>:</li></ul>\n<div style=\"color:Black;background-color:White;\"><pre>\r\n<span style=\"color:Blue;\">class</span> Program\n    {\n        <span style=\"color:Blue;\">static</span> <span style=\"color:Blue;\">void</span> Main(<span style=\"color:Blue;\">string</span>[] args)\n        {\n            <span style=\"color:Blue;\">using</span> (SPSite site = <span style=\"color:Blue;\">new</span> SPSite(<span style=\"color:#A31515;\">&quot;http://sharepoint/&quot;</span>))\n            <span style=\"color:Blue;\">using</span> (SPWeb web = site.RootWeb) \n            {\n                 SPEvolutionManager man = SPEvolutionFactory.GetManagerForWeb(Assembly.GetExecutingAssembly(), web);\n                 man.EnableSharePointLogs();\n                 man.MakeEvolution(); <span style=\"color:Green;\">// apply 2 evolutions step; if you want downgrade scheme use man.MakeEvolution(0) for example.                </span>\n            }\n        }\n    }\r\n</pre></div></div><div class=\"ClearBoth\"></div>",
  "TagList": "SharePoint 2010,",
  "LastEdited": "2011-09-09T03:34:25.97-07:00"
}