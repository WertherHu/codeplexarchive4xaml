{
  "ProjectName": "phonemicroframework",
  "Title": "Windows Phone 7.1 + MicroFramework (a phone device as remote control)",
  "Description": "Will be shown how to integrate a windows phone device and a micro framework board (to build a simple remote control).",
  "MovedLink": "",
  "HomeWiki": "<div class=\"wikidoc\"><h1>Will be shown how to integrate a windows phone device and a micro framework board (to build a simple remote control).</h1>\r\n<br />How use a windows phone device as remote control of a Fez Panda II/MicroFramework board ?  A windows phone device can be connected to a wifi network (for example a wifi router). If you have also a .Net Micro Framework board connected to the wifi network; you can send some http rest  commands from the windows phone device to the .Net Micro Framework board. The netmf / microframework board, it must support the tcp/ip protocol through a connect shield; in this way you can implement a small http web server. There is also the possibility to send from micro framework board tile push notification to the windows phone. In this exaple it will be used the FEZ Ultimate Kit. In the download file there are two project. There are also two video on youtube that show the project in action. - <a href=\"http://www.windowsphone.com/en-US/publishers/stefano64\">Stefano Marchisio / My windows phone marketplace</a> <br /><br /><img src=\"/projects/phonemicroframework/2bf29d8e-f4e3-4d81-87da-c8a27bb5848a\" alt=\"windows-phone-microframework-rest.png\" title=\"windows-phone-microframework-rest.png\" /><br /><br /><u>At this links you can find some little videos on YOUTUBE that show this project in action:</u> <br /><b><a href=\"http://youtu.be/6BfZkEVVqQE\">Windows Phone 7.1 + .Net Micro Framework (How use a windows phone device as remote control)</a></b>  <br /><b><a href=\"http://youtu.be/TeM8BRDIkaQ\">Windows Phone 7.1 + MicroFramework and Tiles allarm (by push notification)</a></b> <br /><i>YOUTUBE channel: (http://www.youtube.com/user/PhoneMicroFramework1)</i><br /><br /><b>First project</b><br />In this project is showed how use  Windows Phone as remote control. Into the <a href=\"http://msdn.microsoft.com/en-us/library/ff402535(v=vs.92).aspx\">silverlight application (windows phone side)</a>   has been used the <a href=\"http://msdn.microsoft.com/it-it/library/system.net.webclient(v=vs.95).aspx\">WebClient</a>  class to manage the http rest call (it is in asynchronous mode). Into the fez panda II (microframework board side) has been written some codes that process the incomming commands and manage the i/o port. The essential thing is to define a syntax for the commands; that must be known both client/server side. Alternatively you can also use <a href=\"http://phonegap.com/\">PhoneGap</a> for the cliet side; so you can create a cross platform apps.<br /><br />www.board.it/turnOn?number=n (turn on the specified port)<br />www.board.it/turnOff?number=n (turn off the specified port)<br />www.board.it/status?number=n (read the status of the specified port)<br /><br />In the download there is a version with silverlight and a version with phonegap. With phonegap it has been used jquery mobile and knockout.js. The server side is the same for both. <a href=\"http://phonemicroframework.codeplex.com/wikipage?title=Windows%20Phone%2fSilverlight%20and%20MicroFramework%20%28How%20create%20a%20remote%20control%29\">Silverlight example</a> - <a href=\"http://phonemicroframework.codeplex.com/wikipage?title=Windows%20Phone%2fPhoneGap%201.4.1%20and%20MicroFramework%20%28How%20create%20a%20remote%20control%29%20\">PhoneGap example</a> <br /><br /><b>Second project</b><br />In this project is showed how create an Windows Phone app that uses tile push notificaton as  temperature allarm. On the Micro Framework board there is a thread that check a temperature sensor. If the temperature change to/from a predefined range the code on the Micro Framework board send a tile push notification to the Windows Phone (this is a native silverlight application/is not a phonegap application).<br /><br /><pre>\nprivate string CreateMessage(int type, double value)\n{\n\n    ...\n\n   string message = &quot;&lt;?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;utf-8\\&quot;?&gt;&quot; +\n     &quot;&lt;wp:Notification xmlns:wp=\\&quot;WPNotification\\&quot;&gt;&quot; +\n     &quot;&lt;wp:Tile&gt;&quot; +\n     &quot;&lt;wp:BackgroundImage&gt;&quot; + backgroundimage + &quot;&lt;/wp:BackgroundImage&gt;&quot; +\n     &quot;&lt;wp:Count&gt;&quot; + count + &quot;&lt;/wp:Count&gt;&quot; +\n     &quot;&lt;wp:Title&gt;&quot; + title + &quot;&lt;/wp:Title&gt;&quot; +\n     &quot;&lt;wp:BackBackgroundImage&gt;&quot; + backbackgroundimage + &quot;&lt;/wp:BackBackgroundImage&gt;&quot; +\n     &quot;&lt;wp:BackTitle&gt;&quot; + backtitle + &quot;&lt;/wp:BackTitle&gt;&quot; +\n     &quot;&lt;wp:BackContent&gt;&quot; + backcontent + &quot;&lt;/wp:BackContent&gt;&quot; +\n     &quot;&lt;/wp:Tile&gt; &quot; +\n   &quot;&lt;/wp:Notification&gt;&quot;;\n\n    ...\n\n   return message;\n }\n\nprivate void SendHttpRequest(string uri, string message)\n{\n   HttpWebResponse webres = null;\n   HttpWebRequest webreq = null;\n   try \n      {\n        byte[] buffer = Encoding.UTF8.GetBytes(message);\n        webreq = (HttpWebRequest)WebRequest.Create(uri);\n        webreq.Method = &quot;POST&quot;;\n        webreq.ContentType = &quot;text/xml&quot;;\n        webreq.Headers.Add(&quot;X-WindowsPhone-Target&quot;, &quot;token&quot;);\n        webreq.Headers.Add(&quot;X-NotificationClass&quot;, &quot;1&quot;);\n        webreq.ContentLength = buffer.Length;\n        webreq.Timeout = 10000;\n        Stream stin = webreq.GetRequestStream();\n        stin.Write(buffer, 0, buffer.Length);\n        stin.Close();\n        webres = (HttpWebResponse)webreq.GetResponse();\n        if (webres.StatusCode == HttpStatusCode.OK)\n        {\n           ...\n           string status1 = webres.Headers[&quot;X-NotificationStatus&quot;];\n           string status2 = webres.Headers[&quot;X-SubscriptionStatus&quot;];\n           ...\n        }\n        webres.Close();\n        sensor.Beep(8000, 500);\n      }\n     catch (Exception ex) \n     {\n        sensor.Beep(500, 4000);\n      }\n     finally\n     {\n        if (  webres != null  )\n            webres.Dispose();\n        if (  webreq != null  )\n            webreq.Dispose();\n    }           \n }\n</pre><br /><br /><b>.Net Micro Framework board</b><br />In this project is used the FEZ Ultimate Kit. This kit provides internet connectivity to FEZ Panda II. It also include eblocks for simple plug-and-play capabilities, giving you access to input/output and sensor data.<br /><br /><img src=\"/projects/phonemicroframework/75b3e6f1-c232-49fc-be29-658e8011c3c8\" alt=\"microframework-fez-pandaII.png\" title=\"microframework-fez-pandaII.png\" /><br /><br /><b>Conclusion</b><br />In this way you can connect embedded devices to a windows phone 7; in the videos it was used a Windows Phone 7.1 / Nokia Lumia 800. Instead of a led you can connect some rele&#39;; so you can create a simply domotic control (Windows Phone 7.1 + MicroFramework). Alternatively if you have not logic on the micro framework board; if you just want to control some relays; you can use a dedicated ethernet rele board like <a href=\"http://www.progettihwsw.com/relays_ethernet_board.htm?gclid=CKiamYu_gq8CFYEx3wodAT_K0Q\">this</a>. In this way; the ethernet rele board internally implement a small webserver so you only send the command to set on/off the rele. <a href=\"http://www.facebook.com/ILovetheMicroFramework\">Follow-Me on facebook.</a> <br /><br /><u>At this links you can find some articles on DotNetToscana (Italian article):</u> <br /><b><a href=\"http://www.dotnettoscana.org/polarizzazione-di-un-led.aspx\">Polarizzazione di un led (Come connettere un led ad un pin di una scheda .Net Micro Framework)</a></b><br /><b><a href=\"http://www.dotnettoscana.org/fez-robot-kit.aspx\">FEZ Robot Kit (Costruire un robot con motor driver e distance sensor)</a></b>    <br /><br /><br /><b><a href=\"http://create.msdn.com\">http://create.msdn.com</a></b> <br /><b><a href=\"http://www.ghielectronics.com\">http://www.ghielectronics.com</a></b> <br /><b><a href=\"http://www.tinyclr.com\">http://www.tinyclr.com</a></b> <br /><b><a href=\"http://www.torinotechnologiesgroup.it\">http://www.torinotechnologiesgroup.it</a></b> <br /><b><a href=\"http://www.dotnettoscana.org/articoli.aspx\">http://www.dotnettoscana.org</a></b> <br /><b><a href=\"http://www.windowsphone.com/en-US/publishers/stefano64\">My windows phone marketplace</a></b> <br /><b><a href=\"http://www.linkedin.com/pub/stefano-marchisio/3a/580/88b\">Linkedin / Stefano Marchisio</a></b> <br /><b><a href=\"http://mastefano64.wordpress.com\">Blog</a></b> <br /><br /><br /></div><div class=\"ClearBoth\"></div>",
  "TagList": "REST,remote control,Micro Framework,Windows Phone 7,",
  "LastEdited": "2014-07-31T00:21:40.643-07:00"
}