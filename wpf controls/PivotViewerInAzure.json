{
  "ProjectName": "PivotViewerInAzure",
  "Title": "Hosting Silverlight Pivot in Windows Azure",
  "Description": "This sample code shows how you can host Silverlight Pivot Viewer in Windows Azure Web Role. You just need to create Pivot Viewer CXML and folders using PivitViewer control and use this sample code to host it inside the Windows Azure Web Role.",
  "MovedLink": "",
  "HomeWiki": "<div class=\"wikidoc\">\r\n<p><strong>Project Description</strong><br>\r\nThis sample code shows how you can host Silverlight Pivot Viewer in Windows Azure Web Role. You just need to create Pivot Viewer CXML and folders using PivitViewer control and use this sample code to host it inside the Windows Azure Web Role.</p>\r\n<p>Visit the Sample Demo Site:&nbsp;<a title=\"http://galaxiespivot.cloudapp.net/\" href=\"http://galaxiespivot.cloudapp.net/\">http://galaxiespivot.cloudapp.net/</a><br>\r\n<br>\r\nIf you decide to host Silverlight PivotViewer control in Windows Azure ASP.NET web role, here are the instructions:\r\n<br>\r\n<br>\r\nTools:<br>\r\nInstall Silverlight PivotViewer SDK:<br>\r\n- <a title=\"http://www.silverlight.net/learn/pivotviewer/\" href=\"http://www.silverlight.net/learn/pivotviewer/\">\r\nhttp://www.silverlight.net/learn/pivotviewer/</a><br>\r\nMicrosoft Live Labs Pivot Tools:<br>\r\n- <a title=\"http://research.microsoft.com/en-us/downloads/dd4a479f-92d6-496f-867d-666c87fbaada/default.aspx\" href=\"http://research.microsoft.com/en-us/downloads/dd4a479f-92d6-496f-867d-666c87fbaada/default.aspx\">\r\nhttp://research.microsoft.com/en-us/downloads/dd4a479f-92d6-496f-867d-666c87fbaada/default.aspx</a><br>\r\n<br>\r\n<br>\r\nPrebuild Pivot content:<br>\r\nFor example let's assume that you already have pivot hosted at some other site as:<br>\r\n- <a title=\"http://galaxiespivot.cloudapp.net/ClientBin/galaxies.cxml\" href=\"http://galaxiespivot.cloudapp.net/ClientBin/galaxies.cxml\">\r\nhttp://galaxiespivot.cloudapp.net/ClientBin/galaxies.cxml</a><br>\r\n- <a title=\"http://xpert360.net/MIX11/MIX11.cxml\" href=\"http://xpert360.net/MIX11/MIX11.cxml\">\r\nhttp://xpert360.net/MIX11/MIX11.cxml</a><br>\r\n<br>\r\nYou can verify that the pivot does work fine in Live Labs Pivot Viewer:<br>\r\n<br>\r\n<img src=\"http://www.codeplex.com/download?ProjectName=pivotviewerinazure&DownloadId=231614\" alt=\"http://www.codeplex.com/download?ProjectName=pivotviewerinazure&DownloadId=231614\" width=\"680\" height=\"444\" style=\"border:1px solid black\"><br>\r\n<br>\r\n<br>\r\n<br>\r\n<br>\r\n<br>\r\nThe following steps with help you to call a Hosted Pivot URL within Silverlight application to run in Windows Azure:<br>\r\n<br>\r\n<br>\r\n<br>\r\n1. Create ASP.NET Web Role<br>\r\n<br>\r\n2. Add a new Silverlight Application to the application and integrated with Web Role created in step #1<br>\r\n<br>\r\n3. In the Silverlight Application add the following references:<br>\r\n<br>\r\n</p>\r\n<ol>\r\n<li>System.Windows.Pivot </li><li>System.Windows.Pivot.Model </li><li>System.Windows.Pivot.SharedUI </li><li>System.Windows.Pivot.StringResources </li><li>System.Windows.Pivot.Utilities </li></ol>\r\n<p><br>\r\n4. In the Mainpage.xaml add the following highlighted code:<br>\r\n<br>\r\n</p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre>&lt;UserControl x:Class=&quot;PivotSilverlightApp.MainPage&quot;\n    xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot;\n    xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot;\n    xmlns:d=&quot;http://schemas.microsoft.com/expression/blend/2008&quot;\n    xmlns:mc=&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot;\n<span style=\"color:#ff0000\">    xmlns:local=&quot;clr-namespace:System.Windows.Pivot;assembly=System.Windows.Pivot&quot;</span>\n    mc:Ignorable=&quot;d&quot;\n    d:DesignHeight=&quot;300&quot; d:DesignWidth=&quot;400&quot;&gt;\n    &lt;Grid x:Name=&quot;LayoutRoot&quot; Background=&quot;White&quot;&gt;\n      <span style=\"color:#ff0000\">  &lt;local:PivotViewer x:Name=&quot;pvWidgets&quot; /&gt;</span>\n    <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">Grid</span><span style=\"color:blue\">&gt;</span>\n<span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">UserControl</span><span style=\"color:blue\">&gt;</span>\n</pre>\r\n</div>\r\n<p><br>\r\n<br>\r\n<br>\r\n5. In the MainPage.xaml.cs please add the highlighted code as below:</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre><span style=\"color:blue\">namespace</span> GalaxySLPivot\n{\n    <span style=\"color:blue\">public</span> <span style=\"color:blue\">partial</span> <span style=\"color:blue\">class</span> MainPage : UserControl\n    {\n        <span style=\"color:green\">// When using DEvelopment Fabric use 127.0.0.1 URL:</span>\n        <span style=\"color:blue\">private</span> <span style=\"color:blue\">static</span> <span style=\"color:blue\">readonly</span> Uri s_GalaxiesCollectionUri = <span style=\"color:blue\">new</span> Uri(<span style=\"color:#a31515\">&quot;http://127.0.0.1/ClientBin/galaxies.cxml&quot;</span>);\n        <span style=\"color:green\">// When using DEvelopment Fabric use actual &lt;yoursrvice&gt;.cloudapp.net URL:</span>\n        <span style=\"color:green\">//private static readonly Uri s_GalaxiesCollectionUri = new Uri(&quot;<span style=\"color:#ff0000\">http://galaxiespivot.cloudapp.net/ClientBin/galaxies.cxml</span>&quot;);</span>\n        <span style=\"color:blue\">public</span> MainPage()\n        {\n            InitializeComponent();\n            pivotWidgets.LoadCollection(s_GalaxiesCollectionUri.ToString(), <span style=\"color:blue\">string</span>.Empty);\n        }\n    }\n}\n</pre>\r\n</div>\r\n<p>&nbsp;</p>\r\n<p>6. Now check the Web Role and Silverlight application in &quot;Browser&quot; that it is working.<br>\r\n<br>\r\n7. Now Check the Web Role in compute Emulator and verify it is working fine.<br>\r\n<br>\r\n8. Now Let's work in Web Role to remove other contents which are not necessary (you sure can keep it if you wish):</p>\r\n<p style=\"padding-left:30px\"><br>\r\na. Remove App_data folder<br>\r\nb. Remove Account Folder<br>\r\nc. Remove Scripts Folder<br>\r\nd. Remove Styles Folder<br>\r\ne. Remove Global.asax<br>\r\nf. Remove About.aspx and About.aspx.cs<br>\r\ng. Remove Site.Master collection<br>\r\n<br>\r\n</p>\r\n<p>9. Now update your web.config as below and add the following &nbsp;<span style=\"color:#ff0000\">RED</span> lines:<br>\r\n<br>\r\n</p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre>&lt;?xml version=&quot;1.0&quot;?&gt;\n\n<span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">configuration</span><span style=\"color:blue\">&gt;</span>\n  &lt;system.web&gt;\n    <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">compilation</span> <span style=\"color:red\">debug</span><span style=\"color:blue\">=</span><span style=\"color:blue\">&quot;true&quot;</span> <span style=\"color:red\">targetFramework</span><span style=\"color:blue\">=</span><span style=\"color:blue\">&quot;4.0&quot;</span> <span style=\"color:blue\">/&gt;</span>\n  &lt;/system.web&gt;\n\n  &lt;system.webServer&gt;\n<span style=\"color:#000000\"><span style=\"color:#ff0000\">     &lt;staticContent&gt;\n            &lt;mimeMap fileExtension=&quot;.cxml&quot; mimeType=&quot;text/xml&quot; /&gt;\n            &lt;mimeMap fileExtension=&quot;.dzc&quot; mimeType=&quot;text/xml&quot; /&gt;\n            &lt;mimeMap fileExtension=&quot;.dzi&quot; mimeType=&quot;text/xml&quot; /&gt;\n     &lt;/staticContent&gt;</span>\n  &lt;/system.webServer&gt;\n</span><span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">configuration</span><span style=\"color:blue\">&gt;</span>\n\n</pre>\r\n</div>\r\n<p><br>\r\n<br>\r\n10. Add a XML file name clientaccesspolicy.xml to the Web Role and insert the following content:<br>\r\n<br>\r\n</p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre><span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">access-policy</span><span style=\"color:blue\">&gt;</span>\n  <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">cross-domain-access</span><span style=\"color:blue\">&gt;</span>\n    <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">policy</span><span style=\"color:blue\">&gt;</span>\n      <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">allow-from</span> <span style=\"color:red\">http-request-headers</span><span style=\"color:blue\">=</span><span style=\"color:blue\">&quot;SOAPAction&quot;</span><span style=\"color:blue\">&gt;</span>\n        <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">domain</span> <span style=\"color:red\">uri</span><span style=\"color:blue\">=</span><span style=\"color:blue\">&quot;*&quot;</span><span style=\"color:blue\">/&gt;</span>\n      <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">allow-from</span><span style=\"color:blue\">&gt;</span>\n      <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">grant-to</span><span style=\"color:blue\">&gt;</span>\n        <span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">resource</span> <span style=\"color:red\">path</span><span style=\"color:blue\">=</span><span style=\"color:blue\">&quot;/&quot;</span> <span style=\"color:red\">include-subpaths</span><span style=\"color:blue\">=</span><span style=\"color:blue\">&quot;true&quot;</span><span style=\"color:blue\">/&gt;</span>\n      <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">grant-to</span><span style=\"color:blue\">&gt;</span>\n    <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">policy</span><span style=\"color:blue\">&gt;</span>\n  <span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">cross-domain-access</span><span style=\"color:blue\">&gt;</span>\n<span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">access-policy</span><span style=\"color:blue\">&gt;</span>\n\n</pre>\r\n</div>\r\n<p>&nbsp;</p>\r\n<p><br>\r\n11. Test the Application in the Compute Emulator<br>\r\n<br>\r\n</p>\r\n<p>12. Now please add your Pivot CXML and necessary files in the ClientBin folder inside &nbsp;the Solution as below:</p>\r\n<p><img src=\"http://www.codeplex.com/download?ProjectName=pivotviewerinazure&DownloadId=231620\" alt=\"http://www.codeplex.com/download?ProjectName=pivotviewerinazure&DownloadId=231620\" width=\"380\" height=\"587\" style=\"border:1px solid black\"></p>\r\n<p>&nbsp;</p>\r\n<pre><span style=\"font-family:'Segoe UI','Microsoft Sans Serif',Arial,Geneva,sans-serif; color:#0000ff\"><span style=\"white-space:normal\">When testing in Compute Emulator use the Pivot link as below</span></span></pre>\r\n<pre><span style=\"font-family:'Segoe UI','Microsoft Sans Serif',Arial,Geneva,sans-serif\"><span style=\"white-space:normal\">&nbsp;</span></span>        <span>// When using DEvelopment Fabric use 127.0.0.1 URL:        </span>\n         <span>private</span> <span>static</span> <span>readonly</span> Uri s_GalaxiesCollectionUri = <span>new</span> Uri(<span>&quot;<span style=\"color:#ff0000\">http://127.0.0.1/ClientBin/galaxies.cxml</span>&quot;</span>);       &nbsp;</pre>\r\n<pre><span style=\"font-family:'Segoe UI','Microsoft Sans Serif',Arial,Geneva,sans-serif\"><br></span></pre>\r\n<pre><span style=\"font-family:'Segoe UI','Microsoft Sans Serif',Arial,Geneva,sans-serif; color:#0000ff\">When you are ready to deploy solution in Windows Azure use the Pivot link as below</span></pre>\r\n<pre><span><br></span></pre>\r\n<pre><span>        // When using DEvelopment Fabric use actual &lt;yoursrvice&gt;.cloudapp.net URL:       &nbsp;</span></pre>\r\n<pre><span>        //private static readonly Uri s_GalaxiesCollectionUri = new Uri(&quot;<span style=\"color:#ff0000\">http://galaxiespivot.cloudapp.net/ClientBin/galaxies.cxml</span>&quot;);  </span></pre>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n<p>13. When test is done successfully, please package the application and deploy in Azure.<br>\r\n<br>\r\n<br>\r\n<br>\r\nI have the site running at : <a title=\"http://galaxiespivot.cloudapp.net/\" href=\"http://galaxiespivot.cloudapp.net/\">\r\nhttp://galaxiespivot.cloudapp.net/</a><br>\r\n<br>\r\n</p>\r\n</div><div class=\"ClearBoth\"></div>",
  "TagList": "PivotViewer,Windows Azure,Silverlight,silverlight 4,",
  "LastEdited": "2011-04-22T14:47:29.057-07:00"
}