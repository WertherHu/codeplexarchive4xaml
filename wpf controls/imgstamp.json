{
  "ProjectName": "imgstamp",
  "Title": "ASP.NET File timestamp extensions",
  "Description": "No more 'Ctl F5'.           The file timestamp extensions are set of ASP.NET controls that append a timestamp to relative paths of files (eg: images, stylesheets, documents) so client browsers will always load any changed files rather than using old cached versions.",
  "MovedLink": "",
  "HomeWiki": "<div class=\"wikidoc\"><h2>Project Description</h2>\rNo more &#39;Ctl F5&#39;.           The file timestamp extensions are set of ASP.NET controls that append a timestamp to relative paths of files &#40;eg&#58; images, stylesheets, documents&#41; so client browsers will always load any changed files rather than using old cached versions.<br /><br />The one thing I hate is clients saying that the style of Web pages are out of sync, or that we are still using the old image. And I have to say the usual &#39;Please press Control F5&#39; to reload the page. It is not a problem until they ask whether all <i>their</i> clients have this issue too....<br /><br />Now we tag the images and StyleSheets with a timestamp so when they change, clients will &#39;<i>always</i>&#39; see the change too. And this library makes it automatic - no need to think about which images have changed, or where they are referenced.<br /><br />If this happens to you, please (by all means) make use of the controls, and let us know if you have any problems, or other controls that need extending.<br />For us these controls have become the standard image and link controls!<br /><br />\n<h2>Library Controls</h2>\r\nThere are 5 ASP.NET Controls in this library that automatically append a <i>timestamp</i> to the relative path to (static) files that are cached on the client eg: images, stylesheets and documents.<br />\n<ol><li>Image (<span class=\"codeInline\">Perceiveit.Web.UI.WebControls.Image</span>, Extends <span class=\"codeInline\">System.Web.UI.WebControls.Image</span>). Timestamps the ImageUrl property for local (relative) files</li>\n<li>ImageButton (<span class=\"codeInline\">Perceiveit.Web.UI.WebControls.ImageButton</span>, Extends <span class=\"codeInline\">System.Web.UI.WebControls.ImageButton</span>). Timestamps the ImageUrl property for local (relative) files</li>\n<li>HyperLink (<span class=\"codeInline\">Perceiveit.Web.UI.WebControls.HyperLink</span>, Extends <span class=\"codeInline\">System.Web.UI.WebControls.Hyperlink</span>). Timestamps the ImageUrl property for local (relative) files</li>\n<li>FileLink (<span class=\"codeInline\">Perceiveit.Web.UI.WebControls.FileLink</span>, Extends <span class=\"codeInline\">Perceiveit.Web.UI.WebControls.Hyperlink</span>). Timestamps the ImageUrl property <b>and</b> the NavigateUrl property for local (relative) files</li>\n<li>StyleSheet (<span class=\"codeInline\">Perceiveit.Web.UI.WebControls.StyleSheet</span>, Extends <span class=\"codeInline\">System.Web.UI.Contol</span>). Renders a link tag to a stylesheet, again adding the timestamp to the query string.</li></ol>\n<br />All the controls have a UseTimeStamp property which can be used to turn off and on the behaviour - however the default is true.<br />When a referenced file is modified or replaced at runtime, the new output for the page will use an updated timestamp automatically. <br />No need to do anything else. All users will see the new file(s) immediately.<br /><br />Because all the controls inherit from standard WebControls (except StyleSheet), there is no learning curve. Just register the assembly on the page or in web config, and change your current image prefixes. Simple.<br />\n<h2>Source Example</h2>\r\n<h4>ASPX Page markup</h4>\r\n<pre>\n&lt;%@ Page Language=&quot;C#&quot; AutoEventWireup=&quot;true&quot;  CodeFile=&quot;Default.aspx.cs&quot; Inherits=&quot;_Default&quot; %&gt;\n&lt;%@ Register Assembly=&quot;Perceiveit.Web.TimeStampControls&quot; Namespace=&quot;Perceiveit.Web.UI.WebControls&quot; TagPrefix=&quot;pit&quot; %&gt;\n&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;\n\n&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; &gt;\n&lt;head runat=&quot;server&quot;&gt;\n    &lt;title&gt;Untitled Page&lt;/title&gt;\n    &lt;!-- the stylesheet --&gt;\n    &lt;pit:StyleSheet ID=&quot;StyleSheet1&quot; runat=&quot;server&quot; CssUrl=&quot;styles/MyStyles.css&quot; MediaTypes=&quot;All&quot; &gt;&lt;/pit:StyleSheet&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;form id=&quot;form1&quot; runat=&quot;server&quot;&gt;\n    &lt;div class=&quot;divider&quot;&gt;\n        &lt;!-- the image --&gt;\n        &lt;pit:Image runat=&quot;Server&quot; ID=&quot;AnImage&quot; ImageUrl=&quot;images/Smiley_Face.gif&quot; /&gt;\n    &lt;/div&gt;\n    &lt;div class=&quot;divider&quot;&gt;\n        &lt;!-- the image button --&gt;\n        &lt;pit:ImageButton runat=&quot;server&quot; ID=&quot;AnImageButton&quot; ImageUrl=&quot;images/Smiley_Face.gif&quot; /&gt;\n    &lt;/div&gt;\n    &lt;div class=&quot;divider&quot;&gt;\n        &lt;!-- the hyperlink --&gt;\n        &lt;pit:HyperLink runat=&quot;server&quot; ID=&quot;AHyperLink&quot; ImageUrl=&quot;images/Smiley_Face.gif&quot; NavigateUrl=&quot;Default.aspx&quot; /&gt;\n    &lt;/div&gt;\n    &lt;div class=&quot;divider&quot;&gt;\n        &lt;!-- the file link --&gt;\n        &lt;pit:FileLink ID=&quot;FileLink1&quot; runat=&quot;server&quot; NavigateUrl=&quot;~/images/Smiley_Face.gif&quot;&gt;Link to a stamped file&lt;/pit:FileLink&gt;\n    &lt;/div&gt;\n    &lt;div class=&quot;reloadpanel&quot;&gt;\n        &lt;a href=&quot;Default.aspx&quot; &gt;Reload&lt;/a&gt;\n    &lt;/div&gt;\n    &lt;/form&gt;\n    \n&lt;/body&gt;\n&lt;/html&gt;\n\n</pre><br />\n<h4>Rendered Output</h4>\r\n<pre>\n&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;\n\n&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; &gt;\n&lt;head&gt;&lt;title&gt;\n\tUntitled Page\n&lt;/title&gt;\n         &lt;!-- the stylesheet --&gt;\n         &lt;link id=&quot;StyleSheet1&quot; type=&quot;text/css&quot; media=&quot;all&quot; rel=&quot;Stylesheet&quot; href=&quot;styles/MyStyles.css?t=633847008962187500&quot;/&gt;&lt;/head&gt;\n&lt;body&gt;\n    &lt;form name=&quot;form1&quot; method=&quot;post&quot; action=&quot;Default.aspx&quot; id=&quot;form1&quot;&gt;\n&lt;div&gt;\n&lt;input type=&quot;hidden&quot; name=&quot;__VIEWSTATE&quot; id=&quot;__VIEWSTATE&quot; value=&quot;/wEP...Bj+Hg==&quot; /&gt;\n&lt;/div&gt;\n\n    &lt;div class=&quot;divider&quot;&gt;\n        &lt;!-- the image --&gt;\n       &lt;img id=&quot;AnImage&quot; src=&quot;images/eip_save.gif?t=633328915880000000&quot; style=&quot;border-width:0px;&quot; /&gt;\n    &lt;/div&gt;\n    &lt;div class=&quot;divider&quot;&gt;\n        &lt;!-- the image button --&gt;\n        &lt;input type=&quot;image&quot; name=&quot;AnImageButton&quot; id=&quot;AnImageButton&quot; src=&quot;images/eip_save.gif?t=633328915880000000&quot; style=&quot;border-width:0px;&quot; /&gt;\n    &lt;/div&gt;\n    &lt;div class=&quot;divider&quot;&gt;\n        &lt;!-- the hyperlink --&gt;\n        &lt;a id=&quot;AHyperLink&quot; href=&quot;Default.aspx&quot;&gt;&lt;img src=&quot;images/eip_save.gif?t=633328915880000000&quot; style=&quot;border-width:0px;&quot; /&gt;&lt;/a&gt;\n    &lt;/div&gt;\n    &lt;div class=&quot;divider&quot;&gt;\n        &lt;a id=&quot;FileLink1&quot; href=&quot;images/eip_save.gif?t=633328915880000000&quot;&gt;Link to a stamped file&lt;/a&gt;\n    &lt;/div&gt;\n    &lt;div class=&quot;reloadpanel&quot;&gt;\n        &lt;!-- the file link --&gt;\n        &lt;a href=&quot;Default.aspx&quot; &gt;Reload&lt;/a&gt;\n    &lt;/div&gt;\n    \n&lt;div&gt;\n\n\t&lt;input type=&quot;hidden&quot; name=&quot;__EVENTVALIDATION&quot; id=&quot;__EVENTVALIDATION&quot; value=&quot;/wE...Kkw=&quot; /&gt;\n&lt;/div&gt;&lt;/form&gt;\n    \n&lt;/body&gt;\n&lt;/html&gt;\n</pre><br /><br />Note the &#39;?t=...&#39;  at the end of the image and stylesheet refs. This means that if any of these referenced files are modified, the timestamp value will change and the browser will <i>automatically</i> reload the new content from the server, <b>this even works for print StyleSheets</b>.<br />\n<h2>Performance and extensibility</h2>\r\nThe main logic for the timestamp is contained in the abstract <span class=\"codeInline\">TimeStampProvider</span> class which has a static factory method <span class=\"codeInline\">GetFileProvider()</span>. Using this allows <span class=\"codeInline\">TimeStampProviders</span> to be stored in the HttpCache for rapid retrieval, and it also means that if there are existing controls you wish to add this timestamp functionality too, then use this method call to get a valid instance. Other implementations could also extend to support other file storage mechanisms.</div><div class=\"ClearBoth\"></div>",
  "TagList": "",
  "LastEdited": "2009-08-05T14:57:39.483-07:00"
}